为实时监控生产环境服务器运行状况、发现潜在的服务器异常并及时报警，技术部在 Q2 上线了监控告警项目

该项目由 AWS CloudWatch 监控系统 + Firmoo Monitor 告警系统两部分组成，两者同时保障生产环境稳定运行及问题处理

## 监控系统

AWS CloudWatch 作为监控系统的核心，与生产环境服务器 EC2 相性极佳，可提供高维度与高细粒度的监控指标，并可将这些指标绘制为图形，展示在监控面板上

![微信截图_20200628151446](C:\Users\firmoo\Desktop\微信截图_20200628151446.png)

![微信截图_20200628151548](C:\Users\firmoo\Desktop\微信截图_20200628151548.png)

目前已接入监控的环境：

- 生产环境
- 预发环境

目前 CloudWatch 所监控的资源：

- Front、API、Service 服务器
- RDS 服务器
- ELB 负载均衡器
- RDS 关系型数据库
- S3 对象存储

目前 CloudWatch 所监控的指标：

- CPU 使用率
- 可用内存量
- 网络 I/O
- 磁盘读写
- 商城首页心跳检测

## 告警系统

当监控系统发现服务器运行异常、或有异常征兆时，便向告警系统 Firmoo-monitor 发起通知

告警系统分析异常信息，并按照异常的严重等级通过不同的告警渠道通知到对应的运维负责人

![微信截图_20200628142715](C:\Users\firmoo\Desktop\微信截图_20200628142715.png)

![微信截图_20200628152724](C:\Users\firmoo\Desktop\微信截图_20200628152724.png)

告警严重等级：

- 「提醒」: 表示出现了轻微的异常, 需要引起运维人员的主意
- 「警告」: 表示服务器正在承载较大负荷, 需要运维人员确定是否出现异常
- 「紧急」: 表示服务器资源已耗尽、商城首页打不开，需要立即处理

告警通知渠道：

- 钉钉群
- 短信通知
- 电话通知

告警等级与告警渠道的对应关系：

| 告警级别 / 告警渠道 | 钉钉群 | 短信通知 | 电话通知 |
| :------------------ | ------ | -------- | -------- |
| 提醒                | ✔      | ×        | ×        |
| 警告                | ✔      | ✔        | ×        |
| 紧急                | ✔      | ✔        | ✔        |

此外告警项目已实现负载均衡 + 无服务化部署，并可拓展为高可用模式，是将来 Firmoo 商城项目向无服务化、高可用发展的一次重要实践